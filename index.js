!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=9)}([function(e){e.exports=JSON.parse('{"db":"mongodb+srv://admin:zP2YMdxASDLEBCNb@my-api-db.rjp9s.mongodb.net/my-api-db","jwtKey":"20100","urls":{"online":"https://api-20100.herokuapp.com","local":"http://localhost:3001"},"apis":{"ABS":{"baseURL":"https://api.scripture.api.bible/v1","headers":{"api-key":"df46e79c4624d2c38e1f4096e14eeed8"}},"telegram":{"token":"1122326668:AAHedkteC6brbmlDcgAVNXb4TEvR_7x19GM","chats":{"ApprendreLeFrancais":"-1001215579533"}}},"cors":{"authorizedResources":["*"],"accessControlAllowOrigins":["https://api-20100.herokuapp.com","https://vincentkh.gitlab.io"],"accessControlAllowMethods":["GET","POST","PATCH","OPTIONS","PUT","DELETE"],"accessControlAllowHeaders":["Accept","Accept-Language","Content-Language","Content-Type","authorization"]}}')},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("jsdom")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("lodash.clonedeep")},function(e,t){e.exports=require("express-async-errors")},function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(6),s=n(1),i=(n(8),n(0));var o=async function(e,t,n){const{cors:r}=i;if(r){const{authorizedResources:a=[],accessControlAllowOrigins:s=[],accessControlAllowMethods:i=[],accessControlAllowHeaders:o=[]}=r,{method:u,path:c}=e,d=e.get("Origin")||"http://localhost:3333";t.header("Access-Control-Allow-Origin",function(e,t){const n=e&&(e.includes("localhost")||e.includes("127.0.0.1")),r="*"===t[0],a=t.includes(e);if(n||r||a)return e}(d,s)),t.header("Access-Control-Allow-Headers",function(e){return"*"===e[0]?"*":e.join(", ")}(o)),t.header("Access-Control-Allow-Methods",function(e){return"*"===e[0]?"*":e.join(", ")}(i)),t.header("Access-Control-Expose-Headers","Authorization"),"OPTIONS"===u?t.status(200).end():"*"===a[0]||a.includes(c)?n():t.status(403).end()}else n()},u=n(3);const c=new s.Schema({_id:String,username:String,password:String,configurations:{},authorizations:{},personId:String,history:[{type:String,details:{},_insertDate:Date,_insertUser:String}],favorites:[{type:String,details:{},_insertDate:Date,_insertUser:String}]},{versionKey:!1});var d=s.model("User",c,"user");var l=async function(e,t,n){let r=e.get("Authorization");if("undefined"===r&&(r=void 0),r)try{const{user:t}=await u.verify(r,i.jwtKey);e.user=t,n()}catch(e){t.status(401).json({name:"INVALID_TOKEN",message:"Unauthorized Access"})}else if("GET"!==e.method||e.path.includes("users"))t.status(401).json({message:"Unauthorized access"});else{const t=await d.findOne({username:"public"});e.user=t,n()}};var p=function(e,t,n,r){if(e){console.error(e);let{status:t=500,name:r,message:a}=e;if(a&&a.includes("|")){const[e,n]=a.split("|");t=e,a=n}n.status(t).json({name:r,message:a})}else r(e)};async function m(e,t){const{body:n={}}=e,{username:r,password:a,token:s}=n;if(!(r&&a||s))throw Error(400,"Username and password are required");if(s){const{user:e}=await u.verify(s,i.jwtKey);if(e){const n=await d.findOne({username:e.username}).lean();return n?t.json({username:e.username,person:n.person,configurations:n.configurations}):t.send(401)}}const o=await d.findOne({username:r,password:a}).lean();if(!o)return t.send(401);const{person:c,configurations:l={}}=o,{language:p}=l,m=u.sign({user:{username:r,person:c,language:p}},i.jwtKey,{expiresIn:"70d"});t.set("Authorization",m).json({username:r,person:c,configurations:l})}var g=function(e){e.route("/login").post(m)};function f(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function y(e){return e?h(e=(e=function(e){return e?e.trim().replace(/ /g,"-").replace(/--/g,"-"):e}(e=function(e){return e?e.replace(/,/g,"").replace(/!/g,"").replace(/’/g,"").replace(/"/g,"").replace(/'/g,"").replace(/`/g,""):e}(e))).toLowerCase()):e}function h(e){return e?e.replace(/à/g,"a").replace(/â/g,"a").replace(/ä/g,"a").replace(/è/g,"e").replace(/é/g,"e").replace(/ê/g,"e").replace(/ë/g,"e").replace(/ù/g,"u").replace(/û/g,"u").replace(/ü/g,"u").replace(/î/g,"i").replace(/ï/g,"i").replace(/ô/g,"o").replace(/ÿ/g,"y").replace(/ç/g,"c"):e}function S(e){return e&&e.replace(/(<([^>]+)>)/gi,"").replace(/  /g,"").replace(/&nbsp;/g,"")}function w(e){return e?e.replace(/\t/g,""):e}function b(e){return e?e.replace(/\n/g,""):e}function _(e=[]){return Array.from(new Set(e))}async function v(e,t){const{user:n,params:{username:r},body:a}=e,s=await d.findOne({username:r}).lean();if(!s)throw Error(404,"User not found","USER_NOT_FOUND");const i={...s,configurations:{...a},_updateDate:new Date,_updateUser:n.username},{configurations:o}=await d.findOneAndUpdate({username:r},i,{new:!0,overwrite:!0});t.send(o)}async function x(e,t){const{params:n,body:r,user:a}=e,s=n.username||r.username,i=await d.findOne({username:s}).lean();if(!i)throw Error(404,"User not found","USER_NOT_FOUND");const o={configurations:{...i.configurations,...r},_updateDate:new Date,_updateUser:a.username},u=await d.findOneAndUpdate({username:s},o,{new:!0});t.send(u.configurations)}async function O(e,t){const{user:n,params:{username:r},body:a}=e,s=await d.findOne({username:r}).lean();if(!s)throw Error(404,"User not found","USER_NOT_FOUND");const i={...s,authorizations:{...a},_updateDate:new Date,_updateUser:n.username},{authorizations:o}=await d.findOneAndUpdate({username:r},i,{new:!0,overwrite:!0});t.send(o)}async function N(e,t){const{params:n,body:r,user:a}=e,s=n.username||r.username,i=await d.findOne({username:s}).lean();if(!i)throw Error(404,"User not found","USER_NOT_FOUND");const o={authorizations:{...i.authorizations,...r},_updateDate:new Date,_updateUser:a.username},u=await d.findOneAndUpdate({username:s},o,{new:!0});t.send(u.authorizations)}async function D(e,t){const{user:n,params:{username:r},body:a}=e,s=await d.findOne({username:r}).lean();if(!s)throw Error(404,"User not found","USER_NOT_FOUND");const{history:i=[]}=s;i.push({...a,_insertDate:new Date,_insertUser:n.username});const o=await d.findOneAndUpdate({username:r},{history:i},{new:!0});t.send(o.history)}async function A(e,t){const{user:n,params:{username:r},body:a}=e,s=await d.findOne({username:r}).lean();if(!s)throw Error(404,"User not found","USER_NOT_FOUND");const{favorites:i=[]}=s;i.push({...a,_insertDate:new Date,_insertUser:n.username});const o=await d.findOneAndUpdate({username:r},{favorites:i},{new:!0});t.send(o.favorites)}async function U(e,t){const{params:{username:n,id:r}}=e,a=await d.findOne({username:n}).lean();if(!a)throw Error(404,"User not found","USER_NOT_FOUND");const{favorites:s=[]}=a,i=s.findIndex(e=>e._id===r);s.splice(i,1),await d.findOneAndUpdate({username:n},{favorites:s}),t.status(204).end()}async function E(e,t){const{user:{username:n}}=e,r=await d.findOne({username:n}).lean();delete r.password,t.send(r)}async function j(e,t){const n=await d.aggregate([{$lookup:{from:"person",localField:"personId",foreignField:"_id",as:"person"}},{$project:{username:1,person:1}}]);t.send(n)}async function $(e,t){const{user:{username:n},body:r}=e;if(await d.findOne({username:r.username}))throw Error(400,"Username already taken","USERNAME_TAKEN");const a={...r,_id:y(r.username,r.name),_insertDate:new Date,_insertUser:n},s=await d.create(a);t.send(s)}async function I(e,t){const{user:n,params:r,body:a}=e,s=r.username||a.username,i=await d.findOne({username:s});if(!i)throw Error(404,"User not found","USER_NOT_FOUND");const o={...a,username:i.username,_insertUser:i._insertUser,_insertDate:i._insertDate,_updateUser:n.username,_updateDate:new Date},u=await d.findOneAndUpdate({username:s},o,{new:!0,overwrite:!0});delete u.password,t.send(u)}async function k(e,t){const{params:n,body:r,user:a}=e,s=n.username||r.username,i={...r,_updateUser:a.username,_updateDate:new Date},o=await d.findOneAndUpdate({username:s},i,{new:!0});if(!o)throw Error(404,"User not found","USER_NOT_FOUND");delete o.password,t.send(o)}async function T(e,t){const{params:{username:n}}=e,r=await d.findOne({username:n}).lean();if(!r)throw Error(404,"User not found","USER_NOT_FOUND");delete r.password,t.send(r)}async function C(e,t){const{params:{username:n}}=e,r=1===(await d.findOneAndDelete({username:n},{rawResult:!0})).lastErrorObject.n?204:404;t.status(r).end()}var q=n(2);async function M(e,t,n={}){let r=e.header("Authorization");return"undefined"===r&&(r=void 0),r&&(n.headers=n.headers||{},n.headers.Authorization=r),(await q.get(t,n)).data}const L=new s.Schema({_id:String,code:String,name:String,shortName:String,description:String,version:String,language:String,group:String,testament:String,order:Number,chapters:[{_id:!1,number:Number,verses:[{_id:!1,number:Number,content:String}]}]},{versionKey:!1});var R=s.model("Book",L,"book");async function z(e,t){const{params:{id:n,chapter:r}}=e,{chapters:a}=await R.findById(n,"chapters").lean(),s=a.find(e=>e.number===Number(r)),i=a.find(e=>e.number===Number(r)-1);i&&(s.previous=i);const o=a.find(e=>e.number===Number(r)+1);o&&(s.next=o),t.status(200).json(s)}async function B(e,t){const{query:{version:n,testament:r,group:a}}=e,s={};n&&(s.version=n),r&&(s.testament=r),a&&(s.group=a);const i=await R.find(s,"id code version group testament order language name shortName description").sort({order:1}).lean(),o=await M(e,"/lists/book_version/options"),u=await M(e,"/languages"),c=i.map(e=>{const t=u.find(t=>t._id===e.language)||{};return{...e,versionLabel:(o.find(t=>t.value===e.version)||{}).label,languageLabel:`${t.name} (${t.locale})`}});t.status(200).json(c)}async function P(e,t){const{params:{id:n},user:{language:r}}=e,a=await R.findById(n).lean(),{version:s}=a,i=await M(e,`/lists/book_version/options/${s}`);a.versionLabel=i;const{name:o,locale:u}=await M(e,`/languages/${r}`);a.languageLabel=`${o} (${u})`,t.status(200).json(a)}async function F(e,t){const n=(await M(e,"/bibles",i.apis.ABS)).data;t.send(n)}async function K(e,t){const{params:{id:n}}=e,r=(await M(e,`/bibles/${n}/books`,i.apis.ABS)).data;t.send(r)}async function H(e,t){const{params:{id:n,bookId:r}}=e,a=(await M(e,`/bibles/${n}/books/${r}/chapters`,i.apis.ABS)).data;t.send(a)}async function J(e,t){const{params:{id:n,chapterId:r}}=e,a=(await M(e,`/bibles/${n}/chapters/${r}/verses`,i.apis.ABS)).data;t.send(a)}async function V(e,t){const{params:{id:n,verseId:r}}=e,a=(await M(e,`/bibles/${n}/verses/${r}`,i.apis.ABS)).data;t.send(a)}var G=n(7);function Y(e){const t=G(e);return function e(t){for(let n in t)"function"==typeof t[n]&&(t[n]=t[n].name),Array.isArray(t[n])&&t[n][0]&&(t[n][0]=e(t[n][0])),"object"==typeof t[n]&&(t[n]=e(t[n]));return t}(t),t}let W={};async function X(e,t){let{descriptor:{name:n,entity:r}}=e;n=`${n.toLowerCase()}s`;const{query:a={},sort:s={_id:-1},skip:i=0,limit:o=1e3,projection:u}=ue(e),c=await r.countDocuments(a);t.header("Content-Range",`${n} ${i}-${o}/${c}`),t.header("Accept-Ranges",n);const d=await r.find(a,u,{skip:i,limit:o}).sort(s).lean(),l=c>d.length?206:200;t.status(l).json(d)}async function Q(e,t){let{descriptor:{schema:n}}=e;t.json(Y(n))}async function Z(e,t){let{descriptor:n}=e;t.json({...n,schema:Y(n.schema)})}async function ee(e,t){const{descriptor:{entity:n},params:{id:r}}=e,{projection:a}=ue(e),s=await n.findById(r,a);if(!s)throw Error(`404|${n.modelName} not found`);t.send(s)}function te(e,t){let n=e._id;return n||(t.toId?n=t.toId(e):e.title?n=y(e.title):e.name&&(n=y(e.name))),n}async function ne(e,t){const{descriptor:n,user:{username:r},body:a}=e,{entity:s,validate:i,postInsert:o}=n;if(!a)throw Error("400|Request body is required");if(Array.isArray(a)){const e=a.map(e=>({...e,_id:te(e,n),_insertDate:new Date,_insertUser:r})),u=await s.find({_id:{$in:e.map(e=>e._id)}},"_id");if(u.length)throw Error(`400|${s.modelName} "${u.map(e=>e._id).join(", ")}" already exists`);if(i)for(let t of e)await i(t);const c=await s.insertMany(e);o&&await o(c),t.status(201).json(c)}else{if(a._id)return await re(e,t);const u=te(a,n);if(a._id=u,await s.exists({_id:u}))throw Error(`400|${s.modelName} already exists`);i&&await i(a);const c=new s({...a,_insertDate:new Date,_insertUser:r}),d=await c.save();o&&await o(d),t.status(201).json(d)}}async function re(e,t){const{descriptor:{entity:n,validate:r,postUpdate:a},user:{username:s},params:i,body:o}=e;if(!o)throw Error("400|Request body is required");const u=i.id||o._id;if(!u)throw Error("400|ID is required");const c=await n.findById(u);if(!c)throw Error(`404|${n.modelName} not found`);r&&await r(o);const d={...o,_id:c._id,_insertDate:c._insertDate,_insertUser:c._insertUser,_updateDate:new Date,_updateUser:s},l=await n.findOneAndReplace({_id:u},d,{new:!0});a&&await a(l),t.status(200).json(l)}async function ae(e,t){const{user:{username:n},descriptor:{entity:r,validate:a},params:s,body:i}=e;if(!i)throw Error("400|Request body is required");const o=s.id||i._id;if(!o)throw Error("400|ID is required");if(!await r.exists({_id:o}))throw Error(`400|${Enity.modelName} not found`);a&&await a(i);const u={...i,_updateDate:new Date,_updateUser:n},c=await r.findByIdAndUpdate(o,u,{new:!0});t.status(200).json(c)}async function se(e,t){const{descriptor:{entity:n},params:{id:r}}=e;if(!await n.findOneAndDelete({_id:r}))throw Error(`404|${n.modelName} not found`);t.status(204).end()}async function ie(e,t){const{descriptor:{entity:n},query:{ids:r}}=e;if(!r)throw Error("400|?ids parameter is required");await n.deleteMany({_id:{$in:r.split(",")}}),t.status(204).end()}function oe(e,t){let{name:n,route:r,schema:a,schemaOptions:i={versionKey:!1}}=t;a._id=String,a._insertDate=Date,a._insertUser=String,a._updateDate=Date,a._updateUser=String,void 0===i.versionKey&&(i.versionKey=!1);const o=new s.Schema(a,i),u=s.model(n,o,`${n.toLowerCase()}s`);function c(e,n,r){e.descriptor=t,r()}t.entity=u,e.route(r).get(c,X).post(c,ne).put(c,re).patch(c,ae).delete(c,ie),e.route(`${r}/schema`).get(c,Q),e.route(`${r}/descriptor`).get(c,Z),e.route(`${n.toLowerCase()}/descriptor`).get(c,Z),e.route(`${r}/:id`).get(c,ee).put(c,re).patch(c,ae).delete(c,se)}function ue(e){const{entity:t,schema:n={}}=e.descriptor;let{projection:r,sort:a,skip:s,limit:i,...o}=e.query;const u=t.modelName;W[u]=W[u]||Y(n);const c=W[u];let d,l={};return Object.keys(c).forEach(e=>{o[e]&&("/"===o[e][0]?l[e]={$regex:new RegExp(o[e].substring(1,o[e].length),"i")}:o[e].includes(",")?l[e]={$in:o[e].split(",")}:"null"===o[e]?l[e]=null:l[e]=o[e]),l[e]&&"Number"===c[e]&&(Array.isArray(l[e])?l[e]=l[e].map(e=>Number(e)):l[e]=Number(l[e]))}),a&&(d={},a.split(",").forEach(e=>d[e.replace("-","")]=e.startsWith("-")?-1:1)),r&&(r=r.replace(/,/g," ")),{query:l,projection:r,sort:d,skip:s,limit:i}}async function ce(e,t){let{body:{chatId:n,text:r}}=e;const a=await de(r,n);t.json(a)}async function de(e,t){const{apis:{telegram:{token:n,chats:r={}}}}=i;return t=t?r[t]:r.ApprendreLeFrancais,e=e.replace(/     /g," ").replace(/    /g," ").replace(/   /g," ").replace(/  /g," "),await q.post(`https://api.telegram.org/bot${n}/sendMessage`,{chat_id:t,text:e,parse_mode:"html"})}const le={word:String,type:String,definition:String,example:String,language:String,etymology:String,image:String,group:String,synonyms:[String],synonymes:[String],antonyms:[String],translations:[{language:String,translation:String}]};function pe(e){const t=((e.translations||[]).find(e=>"EN"===e.language)||{}).translation;let n=`<b>${e.word}</b> ${t?`<i>(${t})</i>`:""}\n-------------------\n${e.definition}`;e.example&&(n+=`\n<b><u>Ex:</u></b> ${e.example}`);const r=[...e.synonymes||[],...e.synonyms||[]];return r.length>0&&(n+=`\n<u>Synonymes:</u> ${r.join(", ")}`),(e.antonyms||[]).length>0&&(n+=`\n<u>Antonymes:</u> ${e.antonyms.join(", ")}`),n}function me(e){let t=`<b>${e.expression}</b>\n-------------------\n${e.definition}`;return e.example&&(t+=`\n<b><u>Ex:</u></b> ${e.example}`),t}var ge=n(4);async function fe(e,t){let{params:{word:n}}=e;n=h(n.toLowerCase());const r=function(e){const{document:t}=new ge.JSDOM(e).window;let n={word:t.getElementsByClassName("dico_title_1")[0].innerHTML,type:b(w(t.getElementsByClassName("dico_title_definition")[0].innerHTML)).trim(),definitions:[]};const r=t.querySelector(".dico_liste"),a=r.querySelectorAll(".grid_last"),s=r.querySelectorAll(".grid_left");let i=[];for(let e of s)e=S(e.innerHTML),e.includes("Sens ")&&i.push(e.replace("Sens 1","").replace("Sens 2","").replace("Sens 3","").replace("Sens 4","").replace("Sens 5","").replace("Sens 6","").replace("Sens 7","").trim());for(let[e,t]of a.entries()){t=S(t.innerHTML);const r=i[e];let a=t.indexOf("Synonymes :");-1===a&&(a=t.indexOf("Synonyme :"));let s=t.indexOf("Contraires :");-1===s&&(s=t.indexOf("Contraire :")),-1===s&&(s=t.indexOf("Antonymes :")),-1===s&&(s=t.indexOf("Antonyme :"));const o=[{key:"meaning",startIndex:0},{key:"example",startIndex:t.indexOf("Exemple :")},{key:"synonyms",startIndex:a},{key:"antonyms",startIndex:s},{key:"etymology",startIndex:t.indexOf("Étymologie :")},{key:"englishTranslations",startIndex:t.indexOf("Traduction anglais :")}].filter(({startIndex:e})=>-1!==e).sort((e,t)=>e.startIndex-t.startIndex).map((e,n,r)=>({...e,endIndex:(r[n+1]||{startIndex:t.length}).startIndex}));let u={};for(let{key:e,startIndex:n,endIndex:a}of o){let s=t.substring(n,a);"meaning"===e&&(r&&(s=`(${r}) ${s}`),s=b(w(s))),"example"===e&&(s=s.replace("Exemple :","").replace(/\n/g,"").trim()),"synonyms"===e&&(s=_(s.replace("Synonymes :","").replace("Synonyme :","").replace(/\n/g,"").split(",").map(e=>f(e.trim())))),"antonyms"===e&&(s=s.replace("Contraires :","").replace("Contraire :","").replace("Antonymes :","").replace("Antonyme :","").replace(/\n/g,"").split(",").map(e=>f(e.trim())),s=_(s)),"etymology"===e&&(s=b(w(s.replace("Étymologie :",""))).trim()),"englishTranslations"===e&&(s=s.replace("Traduction anglais :","").replace(/\n/g,"").split(",").map(e=>f(e.trim()).trim())),u[e]=s}Object.keys(u).length>0&&n.definitions.push(u)}return n}((await q.get(`https://www.linternaute.fr/dictionnaire/fr/definition/${n}`)).data);t.json(r)}async function ye(e,t){let{params:{word:n},query:{source:r="FR",target:a="EN"}}=e;n=n.toLowerCase();let s={};try{s=function(e){let t={};const{document:n}=new ge.JSDOM(e).window,r=n.getElementsByClassName("translation_lines");let a=[];for(let e of r){const t=e.getElementsByClassName("dictLink");for(let e of t)if(e.innerHTML){const t=S(e.innerHTML).replace(/ sb.\/sth./g,"").replace(/ sb./g,"");a.push(t)}}return t.englishTranslations=_(a.map(e=>f(e))),t}((await q.get(encodeURI(`https://www.linguee.fr/francais-anglais/search?query=${n}&source=${r}`))).data)}catch(e){return t.json({error:e})}t.json(s)}s.Promise=global.Promise,s.connect(i.db).then(()=>console.log("Connected to mongoDB"),e=>console.error("Error connecting to mongoDB",e)),s.set("useNewUrlParser",!0),s.set("useFindAndModify",!1),s.set("useCreateIndex",!0),s.set("useUnifiedTopology",!0);const he=r(),Se=process.env.PORT||3001;var we;he.use(a.json()),he.use(o),g(he),he.use(l),(we=he).route("/bible-versions").get(F),we.route("/bibles/:id/books").get(K),we.route("/bibles/:id/books/:bookId/chapters").get(H),we.route("/bibles/:id/chapters/:chapterId/verses").get(J),we.route("/bibles/:id/verses/:verseId").get(V),function(e){e.route("/books").get(B),e.route("/books/:id").get(P),function(e){e.route("/books/:id/chapters/:chapter").get(z)}(e)}(he),function(e){oe(e,{name:"Catalog",route:"/catalogs",schema:{_id:String},schemaOptions:{versionKey:!1,strict:!1}})}(he),function(e){oe(e,{name:"Comment",route:"/comments",schema:{author:String,comment:String,target:{}}})}(he),function(e){oe(e,{name:"Content",route:"/contents",schema:{title:String,shortTitle:String,category:String,group:String,subGroup:String,description:String,shortDescription:String,status:String,language:String,reference:String,order:Number,version:String,versionFlag:Boolean,categories:[String],components:[],previous:{_id:String,title:String,category:String},next:{_id:String,title:String,category:String},related:{_id:String,title:String,category:String},options:{navigator:{show:Boolean,size:String}},versions:[{_id:String,title:String,version:String}],translations:[{_id:String,title:String,language:String}],tags:[{code:String,label:String,_id:!1}],relations:[{type:String,id:String,title:String,category:String,language:String,version:String}]}})}(he),function(e){oe(e,{name:"List",route:"/lists",schema:{_id:String,name:String,description:String,options:{type:[{_id:!1,code:String,label:String}],default:void 0}}})}(he),function(e){oe(e,{name:"Person",route:"/persons",schema:{name:String,email:String,phone:Number,country:String,nationality:String,birthday:Date}})}(he),function(e){oe(e,{name:"Post",route:"/posts",schema:{_id:String,title:String,subTitle:String,shortDescription:String,description:String,content:String,language:String,authorId:String,saintId:String,parentPostId:Object,images:{type:[String],default:void 0},tags:[String]}})}(he),function(e){oe(e,{name:"Reference",route:"/references",schema:{_id:String,type:{type:String,required:!0},reference:{type:String,required:!0},description:String,order:Number,book:String,chapter:Number,verse:Number,startVerse:Number,endVerse:Number},toId:e=>{const{type:t,reference:n,book:r,chapter:a,verse:s,startVerse:i,endVerse:o}=e,u=[t,"_",r];return a&&(u.push("-"),u.push(a)),s?(u.push(":"),u.push(s)):i&&o&&(u.push(":"),u.push(i),u.push("-"),u.push(o)),u.push("_"),u.push(n),u.join("")}})}(he),function(e){oe(e,{name:"Saint",route:"/saints",schema:{_id:String,name:{type:String,required:!0},title:String,image:String,description:String,location:String,birthDay:Number,birthMonth:Number,birthYear:Number,birthLocation:String,deathDay:Number,deathMonth:Number,deathYear:Number,deathLocation:String,canonizedDay:Number,canonizedMonth:Number,canonizedYear:Number,canonizedBy:String,canonizedLocation:String,canonizedNote:String,feastDay:Number,feastMonth:Number,patronages:{type:[String],default:void 0}}})}(he),function(e){oe(e,{name:"Saying",route:"/sayings",schema:{saying:{type:String,required:!0},category:String,language:String,tags:[String],authorId:String,saintId:String}})}(he),function(e){e.route("/user").get(E),e.route("/users").get(j).post($).put(I).patch(k),e.route("/users/:username").get(T).put(I).patch(k).delete(C),function(e){e.route("/users/:username/configurations").put(v).patch(x)}(e),function(e){e.route("/users/:username/authorizations").put(O).patch(N)}(e),function(e){e.route("/users/:username/history").post(D)}(e),function(e){e.route("/users/:username/favorites").post(A),e.route("/users/:username/favorites/:id").delete(U)}(e)}(he),function(e){oe(e,{name:"Word",route:"/words",toId:({word:e})=>y(e),schema:le,postInsert:async e=>{if(!e)return;Array.isArray(e)||(e=[e]);const t=[];for(let n of e){const e=pe(n);t.push(de(e))}t.length>0&&await Promise.all(t)},postUpdate:async e=>{const t=pe(e);await de(t)}})}(he),function(e){oe(e,{name:"Phrase",route:"/phrases",schema:{_id:String,type:String,definition:String,example:String,language:String,translations:[{language:String,translation:String}]}})}(he),function(e){oe(e,{name:"Expression",route:"/expressions",toId:({expression:e})=>y(e),schema:{expression:String,definition:String,example:String,language:String},postInsert:async e=>{if(!e)return;Array.isArray(e)||(e=[e]);const t=[];for(let n of e){const e=me(n);t.push(de(e))}t.length>0&&await Promise.all(t)},postUpdate:async e=>{const t=me(e);await de(t)}})}(he),function(e){oe(e,{name:"Conjugation",route:"/conjugations",schema:{language:String,moods:[{name:String,tenses:[{name:String,conjugation:String,example:String}]}]}})}(he),function(e){e.route("/notifications/telegram").post(ce)}(he),function(e){e.route("/internaute/:word").get(fe)}(he),function(e){e.route("/linguee/translate/:word").get(ye)}(he),function(e){oe(e,{name:"Region",route:"/regions",schema:{_id:String,name:{type:String,col:{md:12}},capital:{type:String,col:{md:9}},areaInSquareKm:{type:Number,label:"Area (km²)",col:{md:3}},description:{type:String,col:{md:12}}}})}(he),function(e){oe(e,{name:"Prayer",route:"/prayers",schema:{_id:String,name:String,text:String,shortDescription:String},page:{adminList:{title:"Prayers",projection:"_id,name,shortDescription",columns:[{title:"Name",name:"name"},{title:"Short description",name:"shortDescription"},{title:"Actions",actions:["delete"]}]},adminModal:{fields:[[{name:"name",col:{xs:12,md:12}}],[{name:"shortDescription",col:{xs:12,md:12}}],[{name:"text",type:"textarea",rows:15,col:{xs:12,md:12}}]]},list:{type:"card",cardColumns:4,cardTitle:"name",cardBody:"text",cardShortDescription:"shortDescription"},entity:{content:[[{type:"h3",field:"name",col:{xs:12,md:12}}],[{type:"paragraph",field:"text",html:!0,col:{xs:12,md:12}}]]}}})}(he),function(e){oe(e,{name:"Novena",route:"/novenas",schema:{_id:String,name:String,texts:[String],startDay:Number,startMonth:Number},page:{adminList:{title:"Novenas",projection:"_id,name",columns:[{title:"Name",name:"name"},{title:"Actions",actions:["delete"]}]},adminModal:{fields:[[{name:"name",col:{xs:12,md:12}}],[{name:"startDay",type:"number",col:{xs:6,md:6}},{type:"number",name:"startMonth",col:{xs:6,md:6},options:[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}]}],[{name:"texts",type:"textareas",rows:10,col:{xs:12,md:12}}]]},list:{type:"card",cardColumns:4,cardTitle:"name"},entity:{content:[[{type:"h3",field:"name",col:{xs:12,md:12}}],[{type:"paragraphs",field:"texts",html:!0,col:{xs:12,md:12}}]]}}})}(he),he.use(p),he.listen(Se,()=>console.log(`Server running on port ${Se}`));t.default=he}]);